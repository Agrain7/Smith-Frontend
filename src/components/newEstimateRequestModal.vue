<!-- frontend/src/components/newEstimateRequestModal.vue -->
<template>
    <teleport to="body">
        <div v-show="isOpen" class="modal-overlay" @click.self="closeModal">

            <!-- íšŒì‚¬ëª… ì…ë ¥ ëª¨ë‹¬ -->
            <div v-if="showCompanyModal" class="modal">
                <div class="modal-content">
                    <h3>íšŒì‚¬ëª…ì„ ì…ë ¥í•˜ì„¸ìš”</h3>
                    <input type="text" v-model="companyName" placeholder="íšŒì‚¬ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                    <p v-if="companyNameError" style="color: red; font-size: 12px;">íšŒì‚¬ëª…ì„ ì…ë ¥í•˜ì„¸ìš”.</p>
                    <button @click="saveCompanyName">í™•ì¸</button>
                </div>
            </div>

            <!-- ê²¬ì ì„œ ëª¨ë‹¬ -->
            <div v-if="showEstimateModal" ref="quotationContents" id="contents1" class="quotation-contents">
                
                <div ref="quotationModal" id="contents2" class="quotation-page">

                    <div id="contents3" class="quotation-container">


                        <!-- í—¤ë”: ë¬¸ì„œë²ˆí˜¸ -->
                        <div class="header-info">
                            <div class="document-number" id="document-number">{{ docNumber }}</div>
                        </div>
                        <!-- ì œëª© -->
                        <div class="title">ê²¬ ì  ì„œ</div>
                        <!-- ì •ë³´ ì„¹ì…˜ -->
                        <div class="info-section">
                            <!-- ì™¼ìª½ í‘œ -->
                            <div class="info-tables-left">
                                <table>
                                    <tbody>
                                        <tr>
                                        <th>íšŒì‚¬ëª…</th>
                                        <td>{{ companyName }}</td>
                                        </tr>
                                        <tr>
                                        <th>í”„ë¡œì íŠ¸ëª…</th>
                                        <td></td>
                                        </tr>
                                        <tr>
                                        <th>ë‹´ë‹¹ì</th>
                                        <td>{{ this.userData.name }}</td>
                                        </tr>
                                        <tr>
                                        <th>ê²¬ì ì¼</th>
                                        <td></td>
                                        </tr>
                                        <tr>
                                        <th>ì¶œê³ ì¼</th>
                                        <td></td>
                                        </tr>
                                        <tr>
                                        <th>ë°°ì†¡ë°©ë²•</th>
                                        <td></td>
                                        </tr>
                                        <tr>
                                        <th>ê²°ì œë°©ë²•</th>
                                        <td></td>
                                        </tr>
                                        <tr>
                                        <th>ê²¬ì ê¸°í•œ</th>
                                        <td></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!-- ì˜¤ë¥¸ìª½ í‘œ -->
                            <div class="info-tables-right">
                                <table class="info-table">
                                    <tbody>
                                        <tr>
                                        <th>íšŒì‚¬ëª…</th>
                                        <td>(ì£¼)ì´í•„</td>
                                        </tr>
                                        <tr>
                                        <th>ë‹´ë‹¹ì</th>
                                        <td></td>
                                        </tr>
                                        <tr>
                                        <th>ì „í™”</th>
                                        <td>02-2054-8273</td>
                                        </tr>
                                        <tr>
                                        <th>mobile</th>
                                        <td></td>
                                        </tr>
                                        <tr>
                                        <th>íŒ©ìŠ¤</th>
                                        <td>02-2054-8275</td>
                                        </tr>
                                        <tr>
                                        <th>ì´ë©”ì¼</th>
                                        <td>ipil@ipil.co.kr</td>
                                        </tr>
                                        <tr>
                                        <th>ìœ íš¨ê¸°ê°„</th>
                                        <td></td>
                                        </tr>
                                        <tr>
                                        <td colspan="2">ì„œìš¸ì‹œ ì†¡íŒŒêµ¬ ì†¡íŒŒëŒ€ë¡œ 167, Bë™ 1210í˜¸</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!-- ê²¬ì ê¸ˆì•¡ -->
                        <div class="total-amount">
                        <span>ê²¬ì ê¸ˆì•¡ : â‚© &nbsp;</span><span id="total-amount">{{ totalAmount.toLocaleString() }}</span> (VAT ë³„ë„)
                        </div>

                        <!-- ì°¸ê³ ì‚¬í•­ ë° íŠ¹ì´ì‚¬í•­ -->
                        <div class="notes-section">
                            <div class="notes">
                                <h3>ì°¸ê³ ì‚¬í•­</h3>
                                <div class="Divideline"></div>
                                <ul>
                                <li> 25t ì´í•˜ëŠ” ìš´ì†¡ë¹„ê°€ ë°œìƒí• ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                                <li>ì„¸ë¶€ ë„ë©´ í™•ì¸ í›„ ê²¬ì ê¸ˆì•¡ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                                <li>ê¸°íƒ€ ìš”ì²­ ì‚¬í•­ì€ ë³„ë„ì˜ í˜‘ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.</li>
                                </ul>
                            </div>
                            <div class="special-notes">
                                <h3>íŠ¹ì´ì‚¬í•­</h3>
                                <div class="Divideline"></div>
                                <p>ì…ê¸ˆê³„ì¢Œ - ê¸°ì—…ì€í–‰ : 000-0000-0000-000 (ì£¼)ì´í•„</p>
                            </div>
                        </div>

                        <div class="Divideline"></div>

                        <!-- ë¶€í’ˆ í‘œ ì„¹ì…˜ -->
                        <div class="parts">
                            <table>
                                <thead>
                                <tr>
                                    <th>ìˆœë²ˆ</th>
                                    <th>ê°•ì¢…</th>
                                    <th>êµ¬ë¶„</th>
                                    <th>ì¤‘ëŸ‰</th>
                                    <th>ê¸ˆì•¡(ì›)</th>
                                </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="(item, index) in quotationItems" :key="index">
                                        <td>{{ index + 1 }}</td>
                                        <td>{{ item.steelType }}</td>
                                        <td>{{ item.category }}</td>
                                        <td>{{ formatNumber(item.weight) }} kg</td>
                                        <td>{{ item.price }}</td>
                                    </tr>              
                                <!-- ë¹ˆ í–‰ -->
                                <tr class="empty-row">
                                    <td colspan="5">&nbsp;</td>
                                </tr>
                                <!-- ìš”ì•½ í–‰ -->
                                <tr class="summary-row">
                                    <td colspan="4" style="text-align:right;">ê³µê¸‰ê°€ì•¡ :</td>
                                    <td>{{ totalAmount.toLocaleString() }} ì›</td>
                                    
                                </tr>
                                <tr class="summary-row">
                                    <td colspan="4" style="text-align:right;">ë¶€ê°€ì„¸ (10%) :</td>
                                    <td>{{ vatAmount.toLocaleString() }} ì›</td>
                                    
                                </tr>
                                <tr class="summary-row">
                                    <td colspan="4" style="text-align:right;">í•©ê³„ê¸ˆì•¡ :</td>
                                    <td>{{ finalAmount.toLocaleString() }} ì›</td>
                                    
                                </tr>
                                </tbody>
                            </table>
                        </div>


        


                    </div>

                    <!-- ë²„íŠ¼ -->
                    <div class="result-container">
                        <button class="btn btn-print" @click="printQuotation">ê²¬ì ì„œ ì¶œë ¥</button>
                        <button class="btn btn-close" @click="closeModal">ë‹«ê¸°</button>
                    </div>

                </div>
                
            </div>            
            
        </div>
        
    </teleport>
</template>
  
<script>
    import axios from 'axios';
    import html2canvas from "html2canvas";
    import jsPDF from "jspdf";
    
    export default {
        name: "newEstimateRequestModal",
        props: {
            isOpen: Boolean,        // ëª¨ë‹¬ ì°½ ìƒíƒœ
            userData: Object,       // ì‚¬ìš©ì ì •ë³´
            quotationItems: Array   // ê²¬ì  ë°ì´í„° (ê°•ì¢…, êµ¬ë¶„, ì¤‘ëŸ‰, ê¸ˆì•¡)
        },
        data() {
            return {
                docNumber: '',
                showCompanyModal: true,
                showEstimateModal: false,
                companyName: "",
                companyNameError: false,
            };
        },
        mounted() {
            // ë‚ ì§œ í¬ë§·: YYYYMMDD
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            const formattedDate = `${year}${month}${day}`;
        
            // ë¬¸ì„œë²ˆí˜¸ ìƒì„± ë° localStorage ì—…ë°ì´íŠ¸
            let docCounter = localStorage.getItem('documentCounter');
            if (!docCounter) {
                docCounter = 1;
            } else {
                docCounter = parseInt(docCounter) + 1;
            }
            localStorage.setItem('documentCounter', docCounter);
            this.docNumber = `NO : ${formattedDate}-IE-${String(docCounter).padStart(4, '0')}`;
            
            this.disableScroll;
        },
        emits: ["close"], // ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì— ëª¨ë‹¬ ë‹«ê¸° ì´ë²¤íŠ¸ ì „ë‹¬
        computed: {
            disableScroll() {
                if (this.isOpen) {
                    document.documentElement.style.overflow = 'hidden'; // ìŠ¤í¬ë¡¤ ë§‰ê¸°
                    
                } else {
                    document.documentElement.style.overflow = 'auto'; // ìŠ¤í¬ë¡¤ ë³µì›
                }
                return this.isOpen; // ê°’ ë°˜í™˜ (ì‹¤ì œ ì‚¬ìš©ì€ ì•ˆ í•˜ì§€ë§Œ computed ìš”êµ¬ì‚¬í•­)
            },
            currentDate() {
                let today = new Date();
                let year = today.getFullYear();
                let month = String(today.getMonth() + 1).padStart(2, "0");
                let day = String(today.getDate()).padStart(2, "0");
                return `${year}ë…„ ${month}ì›” ${day}ì¼`;
            },
            documentNumber() {
                let today = new Date();
                let year = today.getFullYear();
                let month = String(today.getMonth() + 1).padStart(2, "0");
                let day = String(today.getDate()).padStart(2, "0");
                return `IP-${year}${month}${day}-`;
            },
            totalAmount() {
                return this.quotationItems.reduce((sum, item) => sum + parseInt(item.price.replace(/[^0-9]/g, ""), 10), 0);
            },
            vatAmount() {
                return Math.round(this.totalAmount * 0.1);
            },
            finalAmount() {
                return this.totalAmount + this.vatAmount;
            }
        },
        methods: {
            closeModal() {
                this.$emit("close");
            },
            async printQuotation() {
                const modalElement = this.$refs.quotationModal; // ëª¨ë‹¬ì°½ì„ ì°¸ì¡°

                if (!modalElement) {
                    console.error("ëª¨ë‹¬ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                    return;
                }

                // âœ… ë²„íŠ¼ ìˆ¨ê¸°ê¸°
                const buttons = modalElement.querySelectorAll(".result-container");
                buttons.forEach(button => button.style.display = "none");   //  PDF ë³€í™˜ ì‹œ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
                
                try {
                    // âœ… html2canvasë¡œ ìº¡ì²˜í•˜ê¸° ì „ì— **ì ì‹œ ê¸°ë‹¤ë ¤ì„œ ë§ˆì§„ ì ìš©** (DOM ë°˜ì˜ ì‹œê°„ í™•ë³´)
                    await this.$nextTick(); // ë¹„ë™ê¸°ì ìœ¼ë¡œ PDF ë³€í™˜ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ DOM ë°˜ì˜ ì‹œê°„ì„ í™•ë³´

                    const canvas = await html2canvas(modalElement, {
                        scale: 2,            // ê³ í•´ìƒë„ ìº¡ì²˜
                        useCORS: true,       // CORS ë¬¸ì œ í•´ê²°
                        allowTaint: true,    // ì™¸ë¶€ ì´ë¯¸ì§€ í—ˆìš©
                        logging: false,
                        backgroundColor: null // âœ… ë°°ê²½ìƒ‰ ì œê±° (íˆ¬ëª…)
                    });

                    const imgData = canvas.toDataURL("image/jpeg", 0.8); // ìº¡ì²˜í•œ ë‚´ìš©ì„ JPEGë¡œ ë³€í™˜
                    const pdf = new jsPDF({
                        orientation: "portrait", // ì„¸ë¡œ ë°©í–¥
                        unit: "mm",
                        format: "a4",
                    });

                    // âœ… PDF í˜ì´ì§€ í¬ê¸°(A4 ê¸°ì¤€)
                    const pageWidth = 210; // A4 ê°€ë¡œ ê¸¸ì´(mm)
                    const pageHeight = 297; // A4 ì„¸ë¡œ ê¸¸ì´(mm)

                    // âœ… ìº”ë²„ìŠ¤ ì´ë¯¸ì§€ í¬ê¸° ì¡°ì •
                    const imgWidth = pageWidth;
                    const imgHeight = (canvas.height * imgWidth) / canvas.width;

                    let yPosition = 0; // í˜ì´ì§€ ìƒë‹¨ ê¸°ì¤€ ìœ„ì¹˜

                    while (yPosition < imgHeight) {
                        pdf.addImage(imgData, "JPEG", 0, -yPosition, imgWidth, imgHeight);
                        yPosition += pageHeight; // ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™

                        if (yPosition < imgHeight) {
                            pdf.addPage(); // ìƒˆ í˜ì´ì§€ ì¶”ê°€
                        }
                    }

                    // PDF íŒŒì¼ ì‚¬ìš©ì ë‹¤ìš´ë¡œë“œ
                    pdf.save("ê²¬ì ì„œ.pdf");
                    // pdf.save(`ê²¬ì ì„œ_${this.docNumber}.pdf`);   // ë¬¸ì„œë²ˆí˜¸ë¥¼ íŒŒì¼ëª…ìœ¼ë¡œ ì§€ì •


                    // PDFë¥¼ Blob ë°ì´í„°ë¡œ ë³€í™˜
                    const pdfBlob = pdf.output("blob");
                    const pdfFile = new File([pdfBlob], "ê²¬ì ì„œ.pdf", { type: "application/pdf" });

                    // ì„œë²„ë¡œ ì „ì†¡í•˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œ
                    await this.submitEstimate(pdfFile);


                } catch (error) {
                    console.error("PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                } finally {
                    // ë²„íŠ¼ ë‹¤ì‹œ ë³´ì´ê¸°
                    buttons.forEach(button => button.style.display = "flex");
                }
            },
            async submitEstimate(pdfFile) {
                const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000';
                const formData = new FormData();
                formData.append('estimateFile', pdfFile);
                formData.append('projectName', this.userData.email || "Unknown");
                formData.append('productType', this.companyName);

                try {
                    const uploadResponse = await axios.post(`${apiUrl}/api/upload-estimate`, formData, {
                        onUploadProgress: progressEvent => {
                            const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);
                            this.uploadProgress = percentCompleted;
                        }
                    });
                    
                    const uploadData = uploadResponse.data;
                    if (!uploadData.success) {
                        // alert(uploadData.message || "íŒŒì¼ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                        return;
                    }

                    // âœ… ê²¬ì  ìš”ì²­ ë°ì´í„° ì „ì†¡
                    const estimatePayload = {
                        username: this.userData.username,
                        name: this.userData.name,
                        phone: this.userData.phone,
                        projectName: this.userData.email || "Unknown",
                        productType: this.companyName,
                        fileUrl: uploadData.fileUrl,
                        fileName: uploadData.fileName
                    };

                    const estimateRes = await axios.post(`${apiUrl}/api/estimate-request`, estimatePayload, {
                        headers: { 'Content-Type': 'application/json' }
                    });

                    if (!estimateRes.data.success) {
                        // alert(estimateRes.data.message || "ê²¬ì  ìš”ì²­ ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                        return;
                    }

                    // alert("ê²¬ì  ìš”ì²­ì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤.");
                    // this.close();

                } catch (err) {
                    console.error("íŒŒì¼ ì—…ë¡œë“œ ë˜ëŠ” ìš”ì²­ ì „ì†¡ ì˜¤ë¥˜:", err);
                    // alert("ì „ì†¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ");
                }
            },
            formatNumber(value) {
                return value ? value.toLocaleString() : "0";
            },
            saveCompanyName() {
                if (!this.companyName.trim()) {
                    this.companyNameError = true;
                    return;
                }
                this.companyNameError = false;
                this.showCompanyModal = false;
                this.showEstimateModal = true;
            },
        },
        beforeUnmount() {
            // âœ… ì»´í¬ë„ŒíŠ¸ê°€ ì œê±°ë  ë•Œ ìŠ¤í¬ë¡¤ ë³µì›
            document.documentElement.style.overflow = 'auto';
        }

    };
</script>
  
<style scoped>
/* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
body {
    width: 100%;
    overflow-x: auto; /* âœ… ê°€ë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì • */
    display: flex;
    justify-content: center;
    align-items: center;
}
.modal-overlay {
    position: fixed;
    z-index: 1000;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background-color: rgba(255, 255, 255, 1);
    display: flex;
    justify-content: center; 
    align-items: center; /* ğŸ”¹ ìƒë‹¨ ì •ë ¬ë¡œ ë³€ê²½ */
    padding-top: 0;
    overflow-x: auto;
}

/* íšŒì‚¬ëª… ì…ë ¥ í•„ë“œ */
.modal {
    max-width: 90%;
    background: white;
    border-radius: 10px;
    text-align: center;
}
.modal-content {
    width: 300px;
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
}
.modal-content input {
    width: 90%;
    padding: 10px;
    border-radius: 10px;
    border: 1px solid black;
    margin: 10px 0;
}
.modal-content button {
    width: 50%;
    background-color: #007bff;
    color: white;
    padding: 10px 15px;
    border: none;
    cursor: pointer;
    border-radius: 5px;
    font-size: 14px;
}
.modal-content button:hover {
    background-color: #0056b3;
}

/* ê²¬ì ì„œ ì…ë ¥ í•„ë“œ */
.quotation-contents {
    width: 98%;
    height: calc(100vh - 50px); /* ğŸ”¹ í™”ë©´ ì „ì²´ ë†’ì´ì—ì„œ padding ê°’ì„ ì œì™¸í•œ ë†’ì´ */
    display: flex;
    overflow: auto;  /* ğŸ”¹ ìŠ¤í¬ë¡¤ì€ ì—¬ê¸°ì—ì„œë§Œ í™œì„±í™” */
    padding: 20px 0;  /* ğŸ”¹ ìŠ¤í¬ë¡¤ ëì— ì—¬ë°± ì¶”ê°€ */
    position: absolute;
}
.quotation-contents::-webkit-scrollbar {
    width: 10px; /* ê°€ë¡œ ìŠ¤í¬ë¡¤ë°” */
    height: 10px; /* ì„¸ë¡œ ìŠ¤í¬ë¡¤ë°” */
}
.quotation-contents::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.3); /* ìŠ¤í¬ë¡¤ë°” ìƒ‰ìƒ */
    border-radius: 5px;
}
.quotation-contents::-webkit-scrollbar-track {
    background: transparent; /* íŠ¸ë™ ë°°ê²½ íˆ¬ëª… ì²˜ë¦¬ */
}
.quotation-page {
    width: 794px;
    min-height: 1120px; /* ğŸ”¹ ìµœì†Œ A4 í¬ê¸° ìœ ì§€ */
    min-height: 1120px;
    max-height: 100vh; /* âœ… ëª¨ë°”ì¼ì—ì„œ í™”ë©´ í¬ê¸°ë¥¼ ë²—ì–´ë‚˜ì§€ ì•Šë„ë¡ ì„¤ì • */
    background: white;
    display: flex;
    flex-direction: column;
    position: relative;
    transform-origin: center center;
    transform: scale(1);
    flex-shrink: 0;
    padding: 20px;
    margin: auto;
}

.quotation-container {
    width: 90%;
    max-width: 100%; /* âœ… í™”ë©´ í¬ê¸°ë³´ë‹¤ ì»¤ì§€ì§€ ì•Šë„ë¡ ì„¤ì • */
    border: 2px solid black;
    margin: auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
    flex-grow: 1;
}
 
/* ë¬¸ì„œë²ˆí˜¸ í‘œì‹œ ìŠ¤íƒ€ì¼ */
.header-info {
    display: flex;
    justify-content: flex-start;
    margin-top: 5px;
}
  
.document-number {
    font-size: 0.85em;
    font-weight: bold;
}

.title {
    text-align: center;
    align-items: center;
    font-size: 1.6em;
    font-weight: bold;
    margin: 5px 0;
    margin-top: 50px;
    margin-bottom: 20px;
}

.info-section {
    width: 100%;
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
}

.info-tables-left,
.info-tables-right {
    width: 48%;
}

/* ì™¼ìª½ í‘œ ìŠ¤íƒ€ì¼ */
.info-tables-left table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 3px;
}

.info-tables-left th,
.info-tables-left td {
    border: 1px solid #ddd;
    padding: 3px;
    text-align: left;
    vertical-align: middle;
}

.info-tables-left th {
    background-color: #f2f2f2;
    width: 30%;
}

/* ì˜¤ë¥¸ìª½ í‘œ ìŠ¤íƒ€ì¼ */
.info-tables-right table {
    width: 100%;
    border-collapse: collapse;
}

.info-tables-right th,
.info-tables-right td {
    border: 1px solid #ddd;
    padding: 3px;
    text-align: left;
    vertical-align: middle;
}

.info-tables-right th {
    background-color: #f2f2f2;
    width: 30%;
}

/* ê²¬ì ê¸ˆì•¡ ìŠ¤íƒ€ì¼ */
.total-amount {
    margin-bottom: 5px;
    font-size: 0.95em;
    font-weight: bold;
}

/* ì°¸ê³ ì‚¬í•­ ë° íŠ¹ì´ì‚¬í•­ ì„¹ì…˜ */
.notes-section {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
}

.notes,
.special-notes {
    width: 48%;
}

.notes h3,
.special-notes h3 {
    margin-bottom: 3px;
    font-size: 0.95em;
    padding-bottom: 2px;
}

.notes ul {
    list-style: decimal;
    padding-left: 15px;
    margin: 0;
}

.notes ul li {
    margin-bottom: 2px;
}

.special-notes p {
    margin: 0;
}

/* ë¶€í’ˆ í‘œ ì„¹ì…˜ */
.parts {
    width: 100%;
    margin-bottom: 15px;
    justify-content: space-between;
}

.parts h3 {
    margin-bottom: 3px;
    font-size: 0.95em;
    padding-bottom: 2px;
}

.parts table {
    width: 100%;
    text-align: center;
    align-items: center;
    margin: 0 auto;
    border-collapse: collapse;
}

.parts th,
.parts td {
    border: 1px solid #ddd;
    padding: 6px;
    vertical-align: middle;
}

.parts th {
    background-color: #f2f2f2;
}

/* ê¸ˆì•¡ ì—´ ì˜¤ë¥¸ìª½ ì •ë ¬ */
.parts td:nth-child(4), .parts td:nth-child(5) {
    text-align: right;
    padding-right: 20px;
}


/* í•©ê³„, ë¶€ê°€ì„¸, ì´í•© */
.parts .summary-row td {
    font-weight: bold;
    text-align: right;
    padding-right: 20px;
}


/* ë¹ˆ í–‰ ìŠ¤íƒ€ì¼ */
.parts .empty-row td {
    border: none;
    padding: 2px;
    height: 5px;
}

/* ì•¡ì…˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.action-buttons {
    text-align: center;
    margin: 10px 0;
}

.action-buttons button {
    background-color: #4CAF50;
    color: white;
    padding: 10px 20px;
    margin: 5px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1em;
}

.action-buttons button:hover {
    background-color: #45a049;
}

/* ê²°ê³¼ ë²„íŠ¼ í•„ë“œ */
.result-container {
    margin-top: 20px;
    display: flex;
    text-align: center;
    justify-content: center;
    gap: 10px;
}
.result-container .btn-print {
    padding: 10px 15px;
    background-color: blue;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 5px;
}
.result-container .btn-print:hover {
    background-color: darkblue;
}
.result-container .btn-close {
    padding: 10px 15px;
    background-color: blue;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 5px;
}
.result-container .btn-close:hover {
    background-color: darkblue;
}


.btn {
    padding: 10px 15px;
    border: none;
    cursor: pointer;
    border-radius: 5px;
    font-size: 14px;
}
.Divideline {
    width: 100%;
    height: 2px;
    background-color: #ddd;
    margin-top: 5px;
    margin-bottom: 10px;
}

@media (max-width: 786px) {
    .quotation-page {
        transform: scale(0.6); /* âœ… ì‘ì€ í™”ë©´ì—ì„œ ìë™ ì¶•ì†Œ */
    }
}

</style>
  